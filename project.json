{
    "id": "flecs_webgpu_demo",
    "type": "application",
    "value": {
        "author": "Flecs Community",
        "description": "Flecs WebGPU Engine - Web Demo Application",
        "use": [
            "flecs",
            "flecs.components.gui",
            "flecs.components.input", 
            "flecs.components.graphics",
            "flecs.components.transform",
            "flecs.components.geometry",
            "flecs.systems.transform"
        ],
        "language": "c",
        "use-bundle": ["flecs.hub:default"],
        "standalone": true
    },
    "bundle": {
        "repositories": {
            "flecs.hub": "https://github.com/flecs-hub/flecs-hub"
        }
    },
    "lang.c": {
        "${target em}": {
            "cflags": ["-DWEBGPU_BACKEND_EMSCRIPTEN", "-std=gnu99"],
            "ldflags": [
                "-sUSE_WEBGPU=1",
                "-sASYNCIFY=1", 
                "-sALLOW_MEMORY_GROWTH=1",
                "-sSTACK_SIZE=1000000",
                "-sEXPORTED_FUNCTIONS=['_main','_setup_emscripten_main_loop']",
                "-sEXPORTED_RUNTIME_METHODS=['ccall','cwrap']",
                "-sENVIRONMENT=web",
                "-sINVOKE_RUN=0",
                "-sASSERTIONS=1",
                "-sPRINTF_LONG_DOUBLE=0",
                "-sNO_EXIT_RUNTIME=1",
                "-Wl,-u,ntohs"
            ],
            "embed": ["shaders"],
            "exclude": ["src/main_internal.c"]
        }
    }
}