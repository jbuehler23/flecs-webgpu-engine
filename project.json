{
    "id": "flecs.systems.webgpu",
    "type": "package",
    "value": {
        "author": "Flecs Community",
        "description": "WebGPU-based rendering module for Flecs (web-native)",
        "use": [
            "flecs",
            "flecs.components.gui",
            "flecs.components.input",
            "flecs.components.graphics",
            "flecs.components.transform",
            "flecs.components.geometry",
            "flecs.systems.transform"
        ],
        "amalgamate": true
    },
    "lang.c": {
        "${os darwin}": {
            "include": ["../webgpu-headers"],
            "cflags": ["-DWEBGPU_BACKEND_DAWN"],
            "lib": ["objc"],
            "ldflags": [
                "-framework Foundation",
                "-framework CoreFoundation", 
                "-framework IOKit",
                "-framework Metal",
                "-framework QuartzCore"
            ]
        },
        "${target em}": {
            "cflags": ["-DWEBGPU_BACKEND_EMSCRIPTEN"],
            "ldflags": [
                "-sUSE_WEBGPU=1",
                "-sASYNCIFY=1",
                "-sALLOW_MEMORY_GROWTH=1"
            ],
            "embed": ["shaders"]
        }
    }
}